# redis生产环境中部署

1.Redis Cluster，10 台机器，5 台机器部署了 redis 主实例，另外 5 台机器部署了 redis 的从实例，
每个主实例挂了一个从实例，5 个节点对外提供读写服务，每个节点的读写高峰 qps 可能可以
达到每秒 5 万，5 台机器最多是 25 万读写请求每秒。

2.机器是什么配置？32G 内存 + 8 核 CPU + 1T 磁盘，但是分配给 Redis 
进程的是 10g 内存，一般线上生产环境，Redis 的内存尽量不要超过 10g，超过 10g 可能会有问题。那么，5 台机器对外提供读写，一共有 50g 内存。

3.因为每个主实例都挂了一个从实例，所以是高可用的，任何一个主实例宕机，都会自
动故障迁移，Redis 从实例会自动变成主实例继续提供读写服务。

4.你往内存里写的是什么数据？每条数据的大小是多少？商品数据，每条数据是 10kb 。
100 条数据是 1mb ，10 万条数据是 1g 。常驻内存的是 200 万条商品数据，占用内
存是 20g，仅仅不到总内存的 50%。目前高峰期每秒就是 3500 左右的请求量